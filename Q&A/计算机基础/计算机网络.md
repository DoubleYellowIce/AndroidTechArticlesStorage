### 应用层

#### DNS

- DNS是基于什么传输层协议上的，为什么？

  DNS是基于Udp的，原因有如下三点

  - DNS响应报文通常比较小，即使在传输过程发生丢失，重传的代价也是可以接受的。
  - 尽管Tcp是可靠传输，但由于三次握手，四次挥手的建立连接或释放连接过程的存在，有一定的延迟。

  - Tcp需要建立连接，一个DNS服务器往往是服务一大片区域的，我国属于是面积辽阔，网民众多的国家，根域名服务器也只有26台，如果DNS采用Tcp，维护这么多连接，这对DNS服务器的压力是难以想象。

- Udp是不可靠传输，那么DNS是一个不可靠的应用层协议吗？

  不是的，DNS在应用层实现了超时重传的可靠传输。

- DNS只使用Udp吗？

  不是的，在下列两种情况，DNS会使用Tcp。

  - 响应报文超过512字节。这是因为Udp响应报文最大为512字节。
  - 区域传送。区域传送会在主域名服务器给辅助域名服务器传送变化的部分。

### 参考资料

1. [计算机网络](https://github.com/CyC2018/CS-Notes/blob/master/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20-%20%E7%9B%AE%E5%BD%95.md)
2. [根域名服务器只有13台？](https://zhuanlan.zhihu.com/p/107492241)